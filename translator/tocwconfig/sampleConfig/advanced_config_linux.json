{
  "agent":{
    "debug":true
  },
  "logs":{
    "force_flush_interval":5,
    "metrics_collected":{
      "emf_processor":{
        "metric_declaration":[
          {
            "dimensions":[
              [
                "ClusterName",
                "TaskGroup"
              ]
            ],
            "label_matcher":"smtp",
            "metric_selectors":[
              "postfix_cleanup_messages_not_accepted_total",
              "postfix_cleanup_messages_processed_total",
              "postfix_cleanup_messages_rejected_total",
              "promhttp_metric_handler_requests_in_flight",
              "promhttp_metric_handler_requests_total"
            ],
            "source_labels":[
              "container_name"
            ]
          }
        ]
      },
      "prometheus":{
        "ecs_service_discovery":{
          "sd_frequency":"1m",
          "sd_result_file":"/tmp/cwagent_ecs_auto_sd.yaml",
          "task_definition_list":[
            {
              "sd_job_name":"smtp-exporter",
              "sd_metrics_path":"/metrics",
              "sd_metrics_ports":"9154",
              "sd_task_definition_arn_pattern":".*:task-definition/shared-prod-smtp:[0-9]+"
            }
          ]
        },
        "prometheus_config_path":"env:PROMETHEUS_CONFIG_CONTENT"
      }
    }
  }
}